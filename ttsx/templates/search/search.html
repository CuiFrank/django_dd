{% extends 'index/list.html'%}

{% load filters %}
{% block head%}
{% endblock head%}


{% block first_line%}
{{block.super}}
{% endblock first_line%}

	{% block second_line %}
	{{block.super}}

	{% endblock second_line %}

{% block left%}

{% endblock left%}

{%block body%}
{% block navbar%}
{{block.super}}
{% endblock navbar%}
<div class="main_wrap clearfix">

{% block detail%}
			<ul class="goods_type_list clearfix">

				{% for goods in page_obj.object_list %}
				<li>
					<a href="/list/{{goods.object.type.id}}/detail/{{goods.object.id}}/"><img src="/static/media/{{goods.object.pic}}"></a>
					<h4><a href="/list/{{goods.object.type.id}}/detail/{{goods.object.id}}/">{{goods.object.title}}</a></h4>
					<div class="operate">
						<span class="prize">￥{{goods.object.price}}</span>
						<span class="unit">{{goods.object.price}}/{{goods.object.unit}}</span>
						<a href="#" class="add_goods" title="加入购物车"></a>
					</div>
				</li>
				{% endfor %}
			</ul>

			<div class="pagenation">
				{% if page_obj.number != 1 %}
				<a href="?q={{query}}&page={{1}}" class="first">首页</a>

				<a href="?q={{query}}&page={{page_obj.number|add:-1}}" class="up"><上一页</a>
				{% endif%}
				{% for pindex in page_list %}

					{% if pindex == page_obj.number %}
					<a href="#" class="active" id="now">{{ pindex }}</a>
					{% else %}
					<a href="?q={{query}}&amp;page={{pindex}}">{{pindex}}</a>
					{% endif %}
				{% endfor %}

				{% if page_obj.number != page_obj.paginator.num_pages %}
				<a href="?q={{query}}&page={{page_obj.number|add:1}}" class="down">下一页></a>
				<a href="?q={{query}}&page={{page_obj.paginator.num_pages}}" class="last">末页</a>
				{% endif %}
			</div>




		</div>
	</div>

<script>
	$(function(){
				//向上翻页
				$('.up').click(function(){
				    now = $('#now').text()

					if(parseInt(now)<=1){
				        $('.up').prop({'href':'/list/{{uid}}/1/{{orderby}}/'})
					}
					else{
					    $('.up').prop({'href':'/list/{{uid}}/'+(parseInt(now)-1)+'/{{orderby}}'})
//							.parent().find('.active').show().siblings('.other').hide()
					}

				});



				//向下翻页
				$('.down').click(function(){
				    now = $('#now').text()
					if(parseInt(now) >= parseInt({{last_index}}))
					{$('.down').prop({'href':'/list/{{uid}}/'+{{last_index}}+'/{{orderby}}/'})}
					else{
				        $('.down').prop({'href':'/list/{{uid}}/'+(parseInt(now)+1)+'/{{orderby}}/'})
					}

				});


			});
</script>
{% endblock detail%}


{%endblock body%}

